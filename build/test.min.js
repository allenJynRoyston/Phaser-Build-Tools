var PhaserGameObject=function(){function t(){this.game=null,this.global={updatePause:!1}}return t.prototype.init=function(t,e,s){var o,a,n,i,r,d,l=new Phaser.Game(s.width,s.height,Phaser.WEBGL,t,{preload:function(){l.load.enableParallel=!0,l.stage.backgroundColor="#2f2f2f",l.load.image("gametitle","src/assets/game/demo1/titles/angular-attack-title.png"),l.load.audio("intro-music",["src/assets/game/demo1/music/far-sight.ogg"]),l.load.audio("select",["src/assets/game/demo1/sound/Pickup_Coin.ogg"]),l.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),window.WebFontConfig={active:function(){},google:{families:["Press Start 2P"]}},function(){l.load.onLoadStart.add(function(){h.state=p.PRELOAD,(o=l.add.text(l.world.centerX,l.world.centerY/2,"",{font:"18px Impact",fill:"#fff",align:"center"})).anchor.set(.5),(a=l.add.text(l.world.centerX,l.world.centerY,"",{font:"32px Impact",fill:"#fff",align:"center"})).anchor.set(.5)},this),l.load.onFileComplete.add(function(t,e,s,n,i){o.setText("Please wait..."),a.setText(t+"%")},this),l.load.onLoadComplete.add(function(){o.setText("File loaded!"),a.setText(""),setTimeout(function(){o.destroy(),a.destroy(),h.state=p.READY,l.stage.backgroundColor="#000",n=l.time.now+2e3,(i=l.add.sprite(l.world.centerX-15,l.world.centerY,"winners")).anchor.set(.5),i.scale.setTo(1.1,1.1),i.alpha=1,h.ready.music.main=l.add.audio("music-main"),setTimeout(function(){h.ready.music.main.loopFull(.75)},2e3)},2e3)},this)}()},create:function(){u.assignButtons(l)},update:function(){u.isDebuggerEnabled()&&u.updateDebugger();u.read("A").active&&l.time.now>c.input.delay&&(console.log(u.read("A")),c.input.delay=c.input.delayValue+l.time.now);__phaser.global.isPaused||(h.state,p.PRELOAD,h.state===p.READY&&l.time.now>n&&(i.destroy(),h.state=p.TITLE,(r=l.add.sprite(l.world.centerX,l.world.centerY-50,"gametitle")).anchor.set(.5),r.scale.setTo(5,5),l.add.tween(r.scale).to({x:1,y:1},2e3,Phaser.Easing.Bounce.Out,!0),l.time.now+1500,(d=l.add.text(l.world.centerX,l.world.centerY+250,"Press Enter to Start",{font:"24px Press Start 2P",fill:"#fff",align:"center"})).anchor.set(.5),d.alpha=0,l.add.tween(d).to({alpha:1,y:l.world.centerY+200},350,"Linear",!0,1500)),h.state,p.TITLE,h.state===p.INTRO&&l.time.now)}}),u=new IO_CONTROLS,p={BOOT:"BOOT",PRELOAD:"PRELOAD",READY:"READY",TITLE:"TITLE",INTRO:"INTRO",GAMEPLAY:"GAMEPLAY"},c={input:{delay:0,delayValue:100}},h={app:null,preloader:{},ready:{music:{main:null,intro:null,gameplay:null}},gameSelection:0,state:p.BOOT};e.game=this,this.game=l},t.prototype.destroy=function(){this.game.destroy()},t}(),__phaser=new PhaserGameObject,IO_CONTROLS=function(){function t(){this.IO=null,this.buttonSensitivity={TAP:1,SHORT:50,LONG:150,SUPERLONG:300},this.properties={isReady:!1,allowDebugger:!0,buttonDelay:50,timingRefreshRate:1},this.directionalButtons=["UP","DOWN","LEFT","RIGHT"],this.actionButtons=["A","B","X","Y"],this.triggerButtons=["L1","L2","R1","R2","L3","R3"],this.systemButtons=["START","BACK"],this.buttonArray=this.directionalButtons.concat(this.actionButtons,this.triggerButtons,this.systemButtons),this.buttonMap={UP:{name:"UP",code:"ArrowUp"},DOWN:{name:"DOWN",code:"ArrowDown"},LEFT:{name:"LEFT",code:"ArrowLeft"},RIGHT:{name:"RIGHT",code:"ArrowRight"},A:{name:"A",code:"KeyA"},B:{name:"S",code:"KeyS"},X:{name:"D",code:"KeyD"},Y:{name:"F",code:"KeyF"},L1:{name:"Q",code:"KeyQ"},L2:{name:"W",code:"KeyW"},R1:{name:"E",code:"KeyE"},R2:{name:"R",code:"KeyR"},L3:{name:"O",code:"KeyO"},R3:{name:"P",code:"KeyP"},START:{name:"ENTER",code:"Enter"},BACK:{name:"BACKSPACE",code:"Backspace"}},this.disabledButtons={ALL:!1,DIRECTIONAL:!1,TRIGGER:!1,ACTION:!1,SYSTEM:!0},this.debugger={enabled:!1,text:{}}}return t.prototype.assignButtons=function(t){var e=this,s={font:"12px Courier New",fill:"#fff",align:"left"};this.buttonArray.forEach(function(o,a){e.debugger.text[o]=null,e.debugger.text[o]=t.add.text(10,10+15*a,"",s),e.disabledButtons[o]=!1});for(var o={buttons:{},sensitivityPress:{},sensitivityBuffer:{},timedPress:{},timedBuffer:{},timedTrigger:{},state:{}},a=function(s){o.buttons[s]=t.input.keyboard.addKey(Phaser.Keyboard[n.buttonMap[s].name]),o.sensitivityPress[s]=null,o.sensitivityBuffer[s]=0,o.state[s]=function(){return e.getBtnPressType(e.IO.sensitivityBuffer[s])}},n=this,i=0,r=this.buttonArray;i<r.length;i++){a(r[i])}for(var d=function(t){o.buttons[t].onDown.add(function(s){var a,n;clearInterval(o.sensitivityPress[t]);var i=["DIRECTIONAL","ACTION","TRIGGER","SYSTEM"];Object.keys(e.buttonMap).forEach(function(t,o){if(e.buttonMap[t].code===s.event.code)for(var r=0,d=i;r<d.length;r++){var l=d[r];e[l.toLowerCase()+"Buttons"].indexOf(t)+1&&(a=l,n=t)}});var r=!1;e.disabledButtons.ALL&&(r=!0);for(var d=0,l=i;d<l.length;d++){var u=l[d];e.disabledButtons[u]&&a===u&&(r=!0)}Object.keys(e.buttonMap).forEach(function(t,s){e.disabledButtons[t]&&n===t&&(r=!0)}),r||(o.sensitivityPress[t]=setInterval(function(){o.sensitivityBuffer[t]+=1},e.properties.timingRefreshRate))},l)},l=this,u=0,p=this.buttonArray;u<p.length;u++){d(p[u])}return t.input.keyboard.onUpCallback=function(t){for(var s=0,a=e.buttonArray;s<a.length;s++){var n=a[s];t.code===e.buttonMap[n].code&&(clearInterval(o.sensitivityPress[n]),o.sensitivityBuffer[n]=0)}"Backquote"===t.code&&e.properties.allowDebugger&&(e.setDebugger(!e.debugger.enabled),e.updateDebugger())},this.properties.isReady=!0,this.IO=o,o},t.prototype.isReady=function(){return this.properties.isReady},t.prototype.isDebuggerEnabled=function(){return this.debugger.enabled},t.prototype.setDebugger=function(t){void 0===t&&(t=!0),this.debugger.enabled=t},t.prototype.updateDebugger=function(){if(this.properties.isReady)for(var t=0,e=this.buttonArray;t<e.length;t++){var s=e[t];this.debugger.text[s].setText(this.debugger.enabled?this.debuggerString(s):"").bringToTop()}},t.prototype.disableAllInput=function(){this.disabledButtons.ALL=!0},t.prototype.enableAllInput=function(){this.disabledButtons.ALL=!1},t.prototype.disableAllDirectionalButtons=function(){this.disabledButtons.DIRECTIONAL=!0},t.prototype.enableAllDirectionalButtons=function(){this.disabledButtons.DIRECTIONAL=!1},t.prototype.disableAllTriggerButtons=function(){this.disabledButtons.TRIGGER=!0},t.prototype.enableAllTriggerButtons=function(){this.disabledButtons.TRIGGER=!1},t.prototype.disableAllActionButtons=function(){this.disabledButtons.ACTION=!0},t.prototype.enableAllActionButtons=function(){this.disabledButtons.ACTION=!1},t.prototype.disableAllSystemButtons=function(){this.disabledButtons.SYSTEM=!0},t.prototype.enableAllSystemButtons=function(){this.disabledButtons.SYSTEM=!1},t.prototype.setDisableKeyProperty=function(t,e){void 0===e&&(e=!0),this.properties.isReady&&(this.disabledButtons[t.toUpperCase()]=e)},t.prototype.getKeyDisabledValue=function(t){return this.properties.isReady?this.disabledButtons[t.toUpperCase()]:null},t.prototype.clearAllControlIntervals=function(){if(this.properties.isReady)for(var t=0,e=this.buttonArray;t<e.length;t++){var s=e[t];clearInterval(this.IO.timedPress[s]),clearInterval(this.IO.sensitivityPress[s])}},t.prototype.read=function(t){if(this.properties.isReady){return{}[t]={active:this.IO.state[t.toUpperCase()]().val>0,duration:this.IO.state[t.toUpperCase()]().val,state:this.IO.state[t.toUpperCase()]().state,type:this.IO.state[t.toUpperCase()]().type,disabled:this.disabledButtons[t.toUpperCase()]}}},t.prototype.readMulti=function(t,e){if(void 0===e&&(e="OBJECT"),this.properties.isReady){if("OBJECT"===e){for(var s={},o=0,a=t;o<a.length;o++){s[r=a[o]]={active:this.IO.state[r.toUpperCase()]().val>0,duration:this.IO.state[r.toUpperCase()]().val,state:this.IO.state[r.toUpperCase()]().state,type:this.IO.state[r.toUpperCase()]().type,disabled:this.disabledButtons[r.toUpperCase()]}}return s}if("ARRAY"===e){s=[];for(var n=0,i=t;n<i.length;n++){var r=i[n];s.push({key:r,active:this.IO.state[r.toUpperCase()]().val>0,duration:this.IO.state[r.toUpperCase()]().val,state:this.IO.state[r.toUpperCase()]().state,type:this.IO.state[r.toUpperCase()]().type,disabled:this.disabledButtons[r.toUpperCase()]})}return s}}},t.prototype.debuggerString=function(t){return t.toUpperCase()+" ("+this.buttonMap[t.toUpperCase()].name+"/"+this.buttonMap[t.toUpperCase()].code+") | duration: "+this.IO.state[t.toUpperCase()]().val+" | state: "+this.IO.state[t.toUpperCase()]().state+" | type: "+this.IO.state[t.toUpperCase()]().type+" | disabled: "+this.disabledButtons[t.toUpperCase()]},t.prototype.getBtnPressType=function(t){var e=this,s="NONE",o=0,a=0;return Object.keys(this.buttonSensitivity).forEach(function(n){a++,t>e.buttonSensitivity[n]&&(s=n,o=a)}),{val:t,type:s,state:o}},t}(),IO_AUDIO=function(){return function(){}}();